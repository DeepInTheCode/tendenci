{% extends "theme_editor/base_list.html" %}

{% load i18n %}
{% load theme_editor_tags %}
{% load theme_editor_filters %}

{% block title %}{{ block.super }}Theme Picker{% endblock %}

{% block extra_head %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}css/theme-editor.css" />
{% endblock %}
        
{% block body %}
<h1>{% trans "Theme Picker" %}</h1>

{% if themes %}
{% for theme in themes %}
    {% theme_detail theme current_theme%}
{% endfor %}
<form class="theme_picker_form" method="post" action="">{% csrf_token %}
    <select id="id_theme_choices" name="theme">
    {% for choice in theme_choices %}
        <option value="{{ choice }}">{{ choice }}</option>
    {% endfor %}
    </select>
    <input class="theme_picker_submit" type="submit" value="Make this my active theme"/>
</form>
{% endif %}

{% endblock %}
{% block extra_body %}
{{ block.super }}
<script type="text/javascript">
    $(".theme-info").each(function(){
        if ( $(this).attr('data') == "{{ current_theme }}" ){
            $(this).addClass('selected');
            $("#id_theme_choices option[value={{ current_theme }}]").attr('selected', 'selected');
        }
    });
    $(".theme-info").click(function(){
        $(".theme-info").removeClass('selected');
        $(this).addClass('selected');
        var theme = $(this).attr('data');
        $("#id_theme_choices option[value="+theme+"]").attr('selected', 'selected');
    });
</script>
{% endblock %}
